{% extends "layout.html" %}

{% block title %}{{ match['game_id'] }}{% endblock %}

{% block content %}
<div class="container bg-light shadow rounded p-3">
  <div class="d-flex justify-content-center mb-3">
    <span class="badge bg-secondary">{{ match['date'] }} 路 {{ match['time'] }} 路 {{ match['stadium'] }} 路 Attendance: {{ match['capacity'] }}</span>
  </div>
  <div class="d-flex justify-content-around align-items-center mb-5">
    <h1 class="text-center" style="width: 25%;">{{ match['team_a'] }}</h1>
    <div class="d-flex flex-column justify-content-center align-items-center">
      <h1 class="display-2 mt-1 mb-0">{{ match['score_a'] }} - {{ match['score_b'] }}</h1>
      <span class="badge bg-primary">Round {{ match['round'] }} 路 {{ match['phase'] }}</span>
    </div>       
    <h1 class="text-center" style="width: 25%;">{{ match['team_b'] }}</h1>
  </div>

  <div class="d-flex justify-content-center mt-5 mb-2">
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details-tab-content" type="button" role="tab">Details</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="comparison-tab" data-bs-toggle="tab" data-bs-target="#comparison-tab-content" type="button" role="tab">Comparison</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="box-score-tab" data-bs-toggle="tab" data-bs-target="#box-score-tab-content" type="button" role="tab">Box Score</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="play-tab" data-bs-toggle="tab" data-bs-target="#play-tab-content" type="button" role="tab">Play by Play</button>
      </li>
    </ul>
  </div>
  
  <div class="tab-content p-4">
    <!-- Match Details Tab -->
    <div class="tab-pane fade show active" id="details-tab-content" role="tabpanel" tabindex="0">
      test1
    </div>

    <!-- Comparison Tab -->
    <div class="tab-pane fade" id="comparison-tab-content" role="tabpanel" tabindex="1">
      test2
    </div>

    <!-- Box Score Tab -->
    <div class="tab-pane fade" id="box-score-tab-content" role="tabpanel" tabindex="2">
      <div class="table-responsive mb-4">
        <table class="table table-striped table-hover box-score-table">
          <thead class="table-dark">
            <tr>
              <th>Dorsal</th>
              <th class="player-column">Player</th>
              <th>Starter</th>
              <th>Min</th>
              <th>PTS</th>
              <th>FG</th>
              <th>FGA</th>
              <th>3P</th>
              <th>3PA</th>
              <th>FT</th>
              <th>FTA</th>
              <th>ORB</th>
              <th>DRB</th>
              <th>TRB</th>
              <th>AST</th>
              <th>STL</th>
              <th>TOV</th>
              <th>BF</th>
              <th>BA</th>
              <th>FC</th>
              <th>FD</th>
              <th>PIR</th>
              <th>+/-</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            {% for bx in box_score %}
              {% if bx['player_id'] == bx['team_id'] and bx['team_id'] == match['team_id_a'] %}
              <tr class="table-primary table-group-divider">
                <td></td>
                <td class="fw-bold player-column">{{ bx['team_name'] }}</td>
                <td></td>
                <td>{{ bx['minutes'] }}</td>
                <td>{{ bx['points'] }}</td>
                <td>{{ bx['two_points_made'] }}</td>
                <td>{{ bx['two_points_attempted'] }}</td>
                <td>{{ bx['three_points_made'] }}</td>
                <td>{{ bx['three_points_attempted'] }}</td>
                <td>{{ bx['free_throws_made'] }}</td>
                <td>{{ bx['free_throws_attempted'] }}</td>
                <td>{{ bx['offensive_rebounds'] }}</td>
                <td>{{ bx['defensive_rebounds'] }}</td>
                <td>{{ bx['total_rebounds'] }}</td>
                <td>{{ bx['assists'] }}</td>
                <td>{{ bx['steals'] }}</td>
                <td>{{ bx['turnovers'] }}</td>
                <td>{{ bx['blocks_favour'] }}</td>
                <td>{{ bx['blocks_against'] }}</td>
                <td>{{ bx['fouls_committed'] }}</td>
                <td>{{ bx['fouls_received'] }}</td>
                <td>{{ bx['valuation'] }}</td>
                <td>{{ bx['plus_minus'] }}</td>
              </tr>
              {% elif bx['team_id'] == match['team_id_a'] %}
              <tr>
                <td>{{ bx['dorsal'] }}</td>
                <td class="player-column">{{ bx['player_name'] }}</td>
                <td>
                  {% if bx['is_starter'] == 1 %}
                    Yes
                  {% else %}
                    No
                  {% endif %}
                </td>
                <td>{{ bx['minutes'] }}</td>
                <td>{{ bx['points'] }}</td>
                <td>{{ bx['two_points_made'] }}</td>
                <td>{{ bx['two_points_attempted'] }}</td>
                <td>{{ bx['three_points_made'] }}</td>
                <td>{{ bx['three_points_attempted'] }}</td>
                <td>{{ bx['free_throws_made'] }}</td>
                <td>{{ bx['free_throws_attempted'] }}</td>
                <td>{{ bx['offensive_rebounds'] }}</td>
                <td>{{ bx['defensive_rebounds'] }}</td>
                <td>{{ bx['total_rebounds'] }}</td>
                <td>{{ bx['assists'] }}</td>
                <td>{{ bx['steals'] }}</td>
                <td>{{ bx['turnovers'] }}</td>
                <td>{{ bx['blocks_favour'] }}</td>
                <td>{{ bx['blocks_against'] }}</td>
                <td>{{ bx['fouls_committed'] }}</td>
                <td>{{ bx['fouls_received'] }}</td>
                <td>{{ bx['valuation'] }}</td>
                <td>{{ bx['plus_minus'] }}</td>
              </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="table-responsive mb-4">
        <table class="table table-striped table-hover box-score-table">
          <thead class="table-dark">
            <tr>
              <th>Dorsal</th>
              <th class="player-column">Player</th>
              <th>Starter</th>
              <th>Min</th>
              <th>PTS</th>
              <th>FG</th>
              <th>FGA</th>
              <th>3P</th>
              <th>3PA</th>
              <th>FT</th>
              <th>FTA</th>
              <th>ORB</th>
              <th>DRB</th>
              <th>TRB</th>
              <th>AST</th>
              <th>STL</th>
              <th>TOV</th>
              <th>BF</th>
              <th>BA</th>
              <th>FC</th>
              <th>FD</th>
              <th>PIR</th>
              <th>+/-</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            {% for bx in box_score %}
              {% if bx['player_id'] == bx['team_id'] and bx['team_id'] == match['team_id_b'] %}
              <tr class="table-danger table-group-divider">
                <td></td>
                <td class="fw-bold player-column">{{ bx['team_name'] }}</td>
                <td></td>
                <td>{{ bx['minutes'] }}</td>
                <td>{{ bx['points'] }}</td>
                <td>{{ bx['two_points_made'] }}</td>
                <td>{{ bx['two_points_attempted'] }}</td>
                <td>{{ bx['three_points_made'] }}</td>
                <td>{{ bx['three_points_attempted'] }}</td>
                <td>{{ bx['free_throws_made'] }}</td>
                <td>{{ bx['free_throws_attempted'] }}</td>
                <td>{{ bx['offensive_rebounds'] }}</td>
                <td>{{ bx['defensive_rebounds'] }}</td>
                <td>{{ bx['total_rebounds'] }}</td>
                <td>{{ bx['assists'] }}</td>
                <td>{{ bx['steals'] }}</td>
                <td>{{ bx['turnovers'] }}</td>
                <td>{{ bx['blocks_favour'] }}</td>
                <td>{{ bx['blocks_against'] }}</td>
                <td>{{ bx['fouls_committed'] }}</td>
                <td>{{ bx['fouls_received'] }}</td>
                <td>{{ bx['valuation'] }}</td>
                <td>{{ bx['plus_minus'] }}</td>
              </tr>
              {% elif bx['team_id'] == match['team_id_b'] %}
              <tr>
                <td>{{ bx['dorsal'] }}</td>
                <td class="player-column">{{ bx['player_name'] }}</td>
                <td>
                  {% if bx['is_starter'] == 1 %}
                    Yes
                  {% else %}
                    No
                  {% endif %}
                </td>
                <td>{{ bx['minutes'] }}</td>
                <td>{{ bx['points'] }}</td>
                <td>{{ bx['two_points_made'] }}</td>
                <td>{{ bx['two_points_attempted'] }}</td>
                <td>{{ bx['three_points_made'] }}</td>
                <td>{{ bx['three_points_attempted'] }}</td>
                <td>{{ bx['free_throws_made'] }}</td>
                <td>{{ bx['free_throws_attempted'] }}</td>
                <td>{{ bx['offensive_rebounds'] }}</td>
                <td>{{ bx['defensive_rebounds'] }}</td>
                <td>{{ bx['total_rebounds'] }}</td>
                <td>{{ bx['assists'] }}</td>
                <td>{{ bx['steals'] }}</td>
                <td>{{ bx['turnovers'] }}</td>
                <td>{{ bx['blocks_favour'] }}</td>
                <td>{{ bx['blocks_against'] }}</td>
                <td>{{ bx['fouls_committed'] }}</td>
                <td>{{ bx['fouls_received'] }}</td>
                <td>{{ bx['valuation'] }}</td>
                <td>{{ bx['plus_minus'] }}</td>
              </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Play by Play Tab -->
    <div class="tab-pane fade" id="play-tab-content" role="tabpanel" tabindex="3">
      test4
    </div>
  </div>
</div>
{% endblock %}
