{% extends "layout.html" %}

{% block title %}Matches{% endblock %}

{% block content %}
<h1 class="text-center mb-3">Euroleague Matches</h1>
<table class="table table-striped table-hover">
  <caption>Data until 2024.10.11</caption>
  <thead class="table-dark">
    <tr>
      <th class="col-1">Game</th>
      <th class="text-center">Score</th>
      <th>Season</th>
      <th>Phase</th>
      <th>Round</th>
      <th>Date</th>
      <th>Time</th>
      <th class="col-3">Place</th>
    </tr>
  </thead>
  <tbody class="table-group-divider">
    {% for match in matches %}
    <tr>
      <td><a class="text-success" href="/match/{{ match['game_id'] }}">{{ match['game'] }}</a></td>
      <td>
        <span class="d-block text-center">
          {{ match['score_a'] }} - {{ match['score_b'] }}
        </span>
        <div class="d-flex justify-content-around small">
          {% if match['score_a'] > match['score_b'] %}
            <span class="fw-bold text-decoration-underline text-primary">{{ match['team_id_a'] }}</span>
            <span>{{ match['team_id_b'] }}</span>
          {% elif match['score_a'] < match['score_b'] %}
            <span>{{ match['team_id_a'] }}</span>
            <span class="fw-bold text-decoration-underline text-danger">{{ match['team_id_b'] }}</span>
          {% else %}
            <span>{{ match['team_id_a'] }}</span>
            <span>{{ match['team_id_b'] }}</span>
          {% endif %}
        </div>
      </td>
      <td>{{ match['season_code'] }}</td>
      <td>{{ match['phase'] }}</td>
      <td>{{ match['round'] }}</td>
      <td>{{ match['date'] }}</td>
      <td>{{ match['time'] }}</td>
      <td>{{ match['stadium'] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if page_num > 1 %}
    <li class="page-item"><a class="page-link" href="?sort_by={{ sort_by }}&page={{ page_num - 1 }}">Previous</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" disabled>Previous</a></li>
    {% endif %}

    {% for p in range(page_num - 4, end_page + 1) %}
      {% if p == page_num and p > 0 %}
      <li class="page-item active"><a class="page-link" href="?sort_by={{ sort_by }}&page={{ p }}">{{ p }}</a></li>
      {% elif p > 0 %}
      <li class="page-item"><a class="page-link" href="?sort_by={{ sort_by }}&page={{ p }}">{{ p }}</a></li>
      {% endif %}
    {% endfor %}

    {% if page_count > page_num %}
    <li class="page-item"><a class="page-link" href="?sort_by={{ sort_by }}&page={{ page_num + 1 }}">Next</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" disabled>Next</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
